<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>åˆ—è»Šã‚·ãƒ£ãƒƒã‚¿ãƒ¼ã‚¹ãƒ”ãƒ¼ãƒ‰è¨ˆç®—</title>

<style>
body{
  font-family: sans-serif;
  max-width: 600px;
  margin: 0 auto;
  padding: 20px 16px;
  line-height: 1.8;
  font-size: 17px;
}

h2{
  font-size: 24px;
  margin-bottom: 18px;
}

.section{
  background:#f6f6f6;
  border-radius:12px;
  padding:14px;
  margin-bottom:20px;
}

input, select{
  width:100%;
  font-size:18px;
  padding:10px;
  margin-top:6px;
  margin-bottom:14px;
  box-sizing:border-box;
}

button{
  width:100%;
  font-size:20px;
  padding:14px;
  border-radius:10px;
}

.result{
  margin-top:20px;
  font-size:26px;
  font-weight:bold;
}

.note{
  margin-top:14px;
  font-size:13px;
  color:#666;
}

/* â˜… 1è¡Œãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ */
.inlineCheck{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:14px;
  margin-top:-6px;
  margin-bottom:14px;
}
</style>
</head>

<body>

<h2>ğŸš„ ã‚·ãƒ£ãƒƒã‚¿ãƒ¼ã‚¹ãƒ”ãƒ¼ãƒ‰è¨ˆç®— ğŸ“·</h2>


<!-- ===============================
     ã‚«ãƒ¡ãƒ©è¨­å®šï¼ˆå¸¸æ™‚è¡¨ç¤ºï¼‰
================================ -->
<div class="section">

  ãƒ¡ãƒ¼ã‚«ãƒ¼
  <select id="brand"></select>

  æ©Ÿç¨®
  <select id="model"></select>

  ã‚«ãƒ¡ãƒ©ã®æ¨ªãƒ”ã‚¯ã‚»ãƒ«æ•°(px)
  <input id="pixel" type="number">

  <label class="inlineCheck">
    <input type="checkbox" id="manual">
    ãƒ”ã‚¯ã‚»ãƒ«æ•°ã‚’æ‰‹å‹•å…¥åŠ›ã™ã‚‹
  </label>

</div>



åˆ—è»Šé€Ÿåº¦(km/h)
<input id="speed" type="number">

ç”»è§’ã®æ¨ªå¹…(m)
<input id="width" type="number" step="0.1">

<button onclick="calc()">è¨ˆç®—ã™ã‚‹</button>

<div class="result" id="result"></div>


<div class="note">
â€»ãƒ¡ãƒ¼ã‚«ãƒ¼ã¨æ©Ÿç¨®ã‚’é¸ã¶ã¨æ¨ªãƒ”ã‚¯ã‚»ãƒ«æ•°ãŒè‡ªå‹•å…¥åŠ›ã•ã‚Œã¾ã™<br>
â€»åˆ—è»ŠãŒçœŸæ¨ªã«ç§»å‹•ã™ã‚‹éš›ã®ç†è«–å€¤ã§ã™<br><br>

ä½œè€…Xï¼š
<a href="https://x.com/jo_taku150?s=21" target="_blank">
  @jo_taku150
</a>
</div>



<script>
/* ===============================
   ã‚«ãƒ¡ãƒ©ãƒ‡ãƒ¼ã‚¿
=============================== */

const cameraData = {

  Canon: {
    "EOS R5 / R5 Mark II": 8192,
    "EOS R6 / R6 Mark II": 6000,
    "EOS R7 (APS-C)": 6960,
    "EOS R10 / R50 (APS-C)": 6000,
    "EOS RP": 6240,
    "EOS 90D": 6960
  },

  Nikon: {
    "Z9 / Z8 / Z7 II": 8256,
    "Z6 III / Z6 II / Z5 II": 6048,
    "Z5": 6016,
    "Z50 / Z fc (APS-C)": 5568,
    "D850": 8256,
    "D500 / D7500": 5568
  },

  SONY: {
    "Î±1 / Î±1 II": 8640,
    "Î±7R V / Î±7R IV / Î±7CR": 9504,
    "Î±7 IV / Î±7C II": 7008,
    "Î±7 III / Î±9ç³»": 6000,
    "Î±7S III": 4240,
    "Î±6700": 6192,
    "Î±6600 / Î±6400": 6000
  }
};


/* ===============================
   DOM
=============================== */

const brandSel = document.getElementById("brand");
const modelSel = document.getElementById("model");
const pixelInput = document.getElementById("pixel");
const manual = document.getElementById("manual");

const STORAGE_KEY = "cameraSetting";


/* ===============================
   ã‚»ãƒ¬ã‚¯ãƒˆç”Ÿæˆ
=============================== */

Object.keys(cameraData).forEach(b=>{
  brandSel.add(new Option(b,b));
});

function updateModels(){
  modelSel.innerHTML = "";

  Object.entries(cameraData[brandSel.value]).forEach(([name,px])=>{
    const opt = new Option(name,name);
    opt.dataset.px = px;
    modelSel.add(opt);
  });

  updatePixel();
}

function updatePixel(){
  if(!manual.checked){
    pixelInput.value =
      modelSel.selectedOptions[0].dataset.px;
  }
}


/* ===============================
   ä¿å­˜ï¼ˆè‡ªå‹•è¨˜æ†¶ï¼‰
=============================== */

function saveSetting(){
  const s = {
    brand: brandSel.value,
    model: modelSel.value,
    pixel: pixelInput.value,
    manual: manual.checked
  };
  localStorage.setItem(STORAGE_KEY, JSON.stringify(s));
}

function loadSetting(){
  const saved = localStorage.getItem(STORAGE_KEY);
  if(!saved) return;

  const s = JSON.parse(saved);

  brandSel.value = s.brand;
  updateModels();
  modelSel.value = s.model;

  manual.checked = s.manual;
  pixelInput.disabled = !s.manual;
  pixelInput.value = s.pixel;
}


/* ===============================
   ã‚¤ãƒ™ãƒ³ãƒˆ
=============================== */

brandSel.onchange = ()=>{
  updateModels();
  saveSetting();
};

modelSel.onchange = ()=>{
  updatePixel();
  saveSetting();
};

manual.onchange = ()=>{
  pixelInput.disabled = !manual.checked;
  updatePixel();
  saveSetting();
};

pixelInput.oninput = saveSetting;


/* åˆæœŸåŒ– */
updateModels();
loadSetting();


/* ===============================
   è¨ˆç®—
=============================== */

function calc() {

  const kmh = Number(document.getElementById("speed").value);
  const width = Number(document.getElementById("width").value);
  const px = Number(document.getElementById("pixel").value);

  if(!kmh || !width || !px){
    document.getElementById("result").textContent = "æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
    return;
  }

  const speed = kmh / 3.6;
  const time = width / speed;
  const tPixel = time / px;
  const shutter = 1 / tPixel;

  const rounded = Math.round(shutter / 100) * 100;

  document.getElementById("result").textContent =
    `å¿…è¦ã‚·ãƒ£ãƒƒã‚¿ãƒ¼é€Ÿåº¦ï¼š 1/${rounded} ç§’`;
}
</script>

</body>
</html>
